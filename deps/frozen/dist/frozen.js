//>>built
(function(a,d){var f,e,h,j=function(){},c=function(b){for(var g in b)return 0;return 1},i={}.toString,k=function(b){return"[object Function]"==i.call(b)},b=function(b){return"[object String]"==i.call(b)},l=function(b){return"[object Array]"==i.call(b)},g=function(b,g){if(b)for(var a=0;a<b.length;)g(b[a++])},m=function(b,g){for(var a in g)b[a]=g[a];return b},u=function(b,g){return m(Error(b),{src:"dojoLoader",info:g})},p=1,o=function(){return"_"+p++},n=function(b,g,a){return ha(b,g,a,0,n)},A=this,
B=A.document,ya=B&&B.createElement("DiV"),s=n.has=function(b){return k(q[b])?q[b]=q[b](A,B,ya):q[b]},q=s.cache=d.hasCache;s.add=function(b,g,a,c){(void 0===q[b]||c)&&(q[b]=g);return a&&s(b)};for(var r in a.has)s.add(r,a.has[r],0,1);n.async=1;var w=new Function("return eval(arguments[0]);");n.eval=function(b,g){return w(b+"\r\n////@ sourceURL="+g)};var v={},t=n.signal=function(b,a){var c=v[b];g(c&&c.slice(0),function(b){b.apply(null,l(a)?a:[a])})},H=n.on=function(b,g){var a=v[b]||(v[b]=[]);a.push(g);
return{remove:function(){for(var b=0;b<a.length;b++)if(a[b]===g){a.splice(b,1);break}}}},ia=[],za={},ja=[],T={},ka=n.map={},I=[],x={},U="",D={},J={};r={};var L=function(b){var g,a,c,l;for(g in J)a=J[g],(c=g.match(/^url\:(.+)/))?D["url:"+la(c[1],b)]=a:"*now"==g?l=a:"*noref"!=g&&(c=K(g,b),D[c.mid]=D["url:"+c.url]=a);l&&l(V(b));J={}},ma=function(b){return b.replace(/([\.$?*|{}\(\)\[\]\\\/\+^])/g,function(b){return"\\"+b})},W=function(b,g){g.splice(0,g.length);for(var a in b)g.push([a,b[a],RegExp("^"+
ma(a)+"(/|$)"),a.length]);g.sort(function(b,g){return g[3]-b[3]});return g},na=function(b){var g=b.name;g||(g=b,b={name:g});b=m({main:"main"},b);b.location=b.location?b.location:g;if(b.packageMap)ka[g]=b.packageMap;if(!b.main.indexOf("./"))b.main=b.main.substring(2);T[g]=b},oa=[],F=function(a,c,l){for(var e in a){if("waitSeconds"==e)n.waitms=1E3*(a[e]||0);"cacheBust"==e&&(U=a[e]?b(a[e])?a[e]:(new Date).getTime()+"":"");if("baseUrl"==e||"combo"==e)n[e]=a[e];a[e]!==q&&(n.rawConfig[e]=a[e],"has"!=e&&
s.add("config-"+e,a[e],0,c))}if(!n.baseUrl)n.baseUrl="./";/\/$/.test(n.baseUrl)||(n.baseUrl+="/");for(e in a.has)s.add(e,a.has[e],0,c);g(a.packages,na);for(h in a.packagePaths)g(a.packagePaths[h],function(a){var g=h+"/"+a;b(a)&&(a={name:a});a.location=g;na(a)});W(m(ka,a.map),I);g(I,function(b){b[1]=W(b[1],[]);if("*"==b[0])I.star=b});W(m(za,a.paths),ja);g(a.aliases,function(a){b(a[0])&&(a[0]=RegExp("^"+ma(a[0])+"$"));ia.push(a)});if(c)oa.push({config:a.config});else for(e in a.config)c=C(e,l),c.config=
m(c.config||{},a.config[e]);if(a.cache)L(),J=a.cache,a.cache["*noref"]&&L();t("config",[a,n.rawConfig])};n.rawConfig={};F(d,1);F(a,1);F(r,1);var M=function(b){X(function(){g(b.deps,pa)})},ha=function(a,g,c,e,d){var f;if(b(a)){if((f=C(a,e,!0))&&f.executed)return f.result;throw u("undefinedModule",a);}l(a)||(F(a,0,e),a=g,g=c);if(l(a))if(a.length){for(var c="require*"+o(),i,h=[],k=0;k<a.length;)i=a[k++],h.push(C(i,e));f=m(N("",c,0,""),{injected:2,deps:h,def:g||j,require:e?e.require:n,gc:1});x[f.mid]=
f;M(f);var p=G&&0!="sync";X(function(){Y(f,p)});f.executed||z.push(f);O()}else g&&g();return d},V=function(b){if(!b)return n;var a=b.require;if(!a)a=function(g,c,e){return ha(g,c,e,b,a)},b.require=m(a,n),a.module=b,a.toUrl=function(a){return la(a,b)},a.toAbsMid=function(a){return Z(a,b)};return a},z=[],P=[],y={},Ba=function(b){b.injected=1;y[b.mid]=1;b.url&&(y[b.url]=b.pack||1);Aa()},Q=function(b){b.injected=2;delete y[b.mid];b.url&&delete y[b.url];c(y)&&Ca()},Da=n.idle=function(){return!P.length&&
c(y)&&!z.length&&!G},$=function(b,a){if(a)for(var g=0;g<a.length;g++)if(a[g][2].test(b))return a[g];return 0},qa=function(b){for(var a=[],g,c,b=b.replace(/\\/g,"/").split("/");b.length;)g=b.shift(),".."==g&&a.length&&".."!=c?(a.pop(),c=a[a.length-1]):"."!=g&&a.push(c=g);return a.join("/")},N=function(b,a,g,c){return{pid:b,mid:a,pack:g,url:c,executed:0,def:0}},ra=function(b,a,c,e,l,d,i,j){var m,h,p,n;n=/^\./.test(b);if(/(^\/)|(\:)|(\.js$)/.test(b)||n&&!a)return N(0,b,0,b);b=qa(n?a.mid+"/../"+b:b);
if(/^\./.test(b))throw u("irrationalPath",b);a&&(p=$(a.mid,d));(p=(p=p||d.star)&&$(b,p[1]))&&(b=p[1]+b.substring(p[3]));a=(f=b.match(/^([^\/]+)(\/(.+))?$/))?f[1]:"";(m=c[a])?b=a+"/"+(h=f[3]||m.main):a="";var o=0;g(ia,function(a){var g=b.match(a[0]);g&&0<g.length&&(o=k(a[1])?b.replace(a[0],a[1]):a[1])});if(o)return ra(o,0,c,e,l,d,i,j);if(c=e[b])return j?N(c.pid,c.mid,c.pack,c.url):e[b];e=(p=$(b,i))?p[1]+b.substring(p[3]):a?m.location+"/"+h:b;/(^\/)|(\:)/.test(e)||(e=l+e);return N(a,b,m,qa(e+".js"))},
K=function(b,a){return ra(b,a,T,x,n.baseUrl,I,ja)},sa=function(b,a,g){return b.normalize?b.normalize(a,function(b){return Z(b,g)}):Z(a,g)},ta=0,C=function(b,a,g){var c,e;(c=b.match(/^(.+?)\!(.*)$/))?(e=C(c[1],a,g),5===e.executed&&!e.load&&aa(e),e.load?(c=sa(e,c[2],a),b=e.mid+"!"+(e.dynamic?++ta+"!":"")+c):(c=c[2],b=e.mid+"!"+ ++ta+"!waitingForPlugin"),b={plugin:e,mid:b,req:V(a),prid:c}):b=K(b,a);return x[b.mid]||!g&&(x[b.mid]=b)},Z=n.toAbsMid=function(b,a){return K(b,a).mid},la=n.toUrl=function(b,
a){var g=K(b+"/x",a),c=g.url;return ua(0===g.pid?b:c.substring(0,c.length-5))},va={injected:2,executed:5,def:3,result:3},E=function(b){return x[b]=m({mid:b},va)},Ea=E("require"),Fa=E("exports"),Ga=E("module"),R={},ba=0,aa=function(b){var a=b.result;b.dynamic=a.dynamic;b.normalize=a.normalize;b.load=a.load;return b},Ha=function(b){var a={};g(b.loadQ,function(g){var c=sa(b,g.prid,g.req.module),e=b.dynamic?g.mid.replace(/waitingForPlugin$/,c):b.mid+"!"+c,c=m(m({},g),{mid:e,prid:c,injected:0});x[e]||
wa(x[e]=c);a[g.mid]=x[e];Q(g);delete x[g.mid]});b.loadQ=0;var c=function(b){for(var g=b.deps||[],c=0;c<g.length;c++)(b=a[g[c].mid])&&(g[c]=b)},e;for(e in x)c(x[e]);g(z,c)},ca=function(b){n.trace("loader-finish-exec",[b.mid]);b.executed=5;b.defOrder=ba++;b.loadQ&&(aa(b),Ha(b));for(e=0;e<z.length;)z[e]===b?z.splice(e,1):e++;/^require\*/.test(b.mid)&&delete x[b.mid]},Ia=[],Y=function(b,a){if(4===b.executed)return n.trace("loader-circular-dependency",[Ia.concat(b.mid).join("->")]),!b.def||a?R:b.cjs&&
b.cjs.exports;if(!b.executed){if(!b.def)return R;var g=b.mid,c=b.deps||[],e,l=[],d=0;for(b.executed=4;d<c.length;){e=c[d++];e=e===Ea?V(b):e===Fa?b.cjs.exports:e===Ga?b.cjs:Y(e,a);if(e===R)return b.executed=0,n.trace("loader-exec-module",["abort",g]),R;l.push(e)}n.trace("loader-run-factory",[b.mid]);g=b.def;l=k(g)?g.apply(null,l):g;b.result=void 0===l&&b.cjs?b.cjs.exports:l;ca(b)}return b.result},G=0,X=function(b){try{G++,b()}finally{G--}Da()&&t("idle",[])},O=function(){G||X(function(){for(var b,a,
g=0;g<z.length;)b=ba,a=z[g],Y(a),b!=ba?g=0:g++})};void 0===s("dojo-loader-eval-hint-url")&&s.add("dojo-loader-eval-hint-url",1);var ua=function(b){b+="";return b+(U?(/\?/.test(b)?"&":"?")+U:"")},wa=function(b){var a=b.plugin;5===a.executed&&!a.load&&aa(a);var g=function(a){b.result=a;Q(b);ca(b);O()};a.load?a.load(b.prid,b.req,g):a.loadQ?a.loadQ.push(b):(a.loadQ=[b],z.unshift(a),pa(a))},S=0,da=0,ea=0,Ja=function(b,a){s("config-stripStrict")&&(b=b.replace(/"use strict"/g,""));ea=1;b===S?S.call(null):
n.eval(b,s("dojo-loader-eval-hint-url")?a.url:a.mid);ea=0},pa=function(b){var a=b.mid,g=b.url;if(!b.executed&&!b.injected&&!(y[a]||b.url&&(b.pack&&y[b.url]===b.pack||1==y[b.url])))if(Ba(b),b.plugin)wa(b);else{var c=function(){Ka(b);2!==b.injected&&(Q(b),m(b,va),n.trace("loader-define-nonmodule",[b.url]));O()};(S=D[a]||D["url:"+b.url])?(n.trace("loader-inject",["cache",b.mid,g]),Ja(S,b),c()):(n.trace("loader-inject",["script",b.mid,g]),da=b,n.injectUrl(ua(g),c,b),da=0)}},fa=function(b,a,g){n.trace("loader-define-module",
[b.mid,a]);if(2===b.injected)return t("error",u("multipleDefine",b)),b;m(b,{deps:a,def:g,cjs:{id:b.mid,uri:b.url,exports:b.result={},setExports:function(a){b.cjs.exports=a},config:function(){return b.config}}});for(var c=0;c<a.length;c++)a[c]=C(a[c],b);Q(b);if(!k(g)&&!a.length)b.result=g,ca(b);return b},Ka=function(b,a){for(var c=[],e,l;P.length;)l=P.shift(),a&&(l[0]=a.shift()),e=l[0]&&C(l[0])||b,c.push([e,l[1],l[2]]);L(b);g(c,function(b){M(fa.apply(null,b))})},Ca=j,Aa=j;s.add("ie-event-behavior",
!!B.attachEvent&&("undefined"===typeof opera||"[object Opera]"!=opera.toString()));var ga=function(b,a,g,c){if(s("ie-event-behavior"))return b.attachEvent(g,c),function(){b.detachEvent(g,c)};b.addEventListener(a,c,!1);return function(){b.removeEventListener(a,c,!1)}},La=ga(window,"load","onload",function(){n.pageLoaded=1;"complete"!=B.readyState&&(B.readyState="complete");La()}),xa=B.getElementsByTagName("script")[0],Ma=xa.parentNode;n.injectUrl=function(b,a,g){var g=g.node=B.createElement("script"),
c=ga(g,"load","onreadystatechange",function(b){var b=b||window.event,g=b.target||b.srcElement;if("load"===b.type||/complete|loaded/.test(g.readyState))c(),e(),a&&a()}),e=ga(g,"error","onerror",function(a){c();e();t("error",u("scriptError",[b,a]))});g.type="text/javascript";g.charset="utf-8";g.src=b;Ma.insertBefore(g,xa);return g};n.log=j;n.trace=j;E=function(a,g,c){var e=arguments.length,l=["require","exports","module"],d=[0,a,g];1==e?d=[0,k(a)?l:[],a]:2==e&&b(a)?d=[a,k(g)?l:[],g]:3==e&&(d=[a,g,c]);
n.trace("loader-define",d.slice(0,2));if((e=d[0]&&C(d[0]))&&!y[e.mid])M(fa(e,d[1],d[2]));else if(!s("ie-event-behavior")||ea)P.push(d);else{e=e||da;if(!e)for(a in y)if((l=x[a])&&l.node&&"interactive"===l.node.readyState){e=l;break}e?(L(e),M(fa(e,d[1],d[2]))):t("error",u("ieDefineFailed",d[0]));O()}};E.amd={vendor:"dojotoolkit.org"};m(m(n,d.loaderPatch),a.loaderPatch);H("error",function(b){try{if(console.error(b),b instanceof Error)for(var a in b);}catch(g){}});m(n,{uid:o,cache:D,packs:T});if(!A.define)A.define=
E,A.require=n,g(oa,function(b){F(b)}),H=r.deps||a.deps||d.deps,r=r.callback||a.callback||d.callback,n.boot=H||r?[H||[],r]:0})(this.dojoConfig||this.djConfig||this.require||{},{async:1,baseUrl:"./",hasCache:{"config-selectorEngine":"acme","config-tlmSiblingOfDojo":1,"dojo-built":1,"dojo-loader":1,dom:1,"host-browser":1},packages:[{location:"../frozen",main:"GameCore",name:"frozen"},{location:".",name:"dojo"},{location:"../dcl",main:"dcl",name:"dcl"}]});
require({cache:{"dist/frozen":function(){define([],1)},"frozen/box2d/Box":function(){define("frozen/box2d/Box",["dcl","dcl/bases/Mixer","dojo/_base/lang"],function(a,d){var f=Box2D.Common.Math.b2Vec2,e=Box2D.Dynamics.b2BodyDef,h=Box2D.Dynamics.b2Body,j=Box2D.Dynamics.b2FixtureDef,c=Box2D.Dynamics.b2World,i=Box2D.Collision.Shapes.b2PolygonShape,k=Box2D.Collision.Shapes.b2CircleShape;return a(d,{intervalRate:60,adaptive:!1,bodiesMap:null,fixturesMap:null,jointsMap:null,b2World:null,gravityX:0,gravityY:9.8,
allowSleep:!0,resolveCollisions:!1,contactListener:null,collisions:null,scale:30,constructor:function(b){if(b&&b.intervalRate)this.intervalRate=parseInt(b.intervalRate,10);this.bodiesMap={};this.fixturesMap={};this.jointsMap={};this.b2World=new c(new f(this.gravityX,this.gravityY),this.allowSleep);this.resolveCollisions&&this.addContactListener(this.contactListener||this)},update:function(b){if(this.resolveCollisions)this.collisions={};var a=Date.now();b?this.b2World.Step(b/1E3,10,10):this.b2World.Step(this.adaptive?
(a-this.lastTimestamp)/1E3:1/this.intervalRate,10,10);this.b2World.ClearForces();return Date.now()-a},getState:function(){for(var b={},a=this.b2World.GetBodyList();a;a=a.m_next)if(a.IsActive()&&"undefined"!==typeof a.GetUserData()&&null!==a.GetUserData()&&(b[a.GetUserData()]={x:a.GetPosition().x,y:a.GetPosition().y,angle:a.GetAngle(),center:{x:a.GetWorldCenter().x,y:a.GetWorldCenter().y},linearVelocity:a.m_linearVelocity,angularVelocity:a.m_angularVelocity},this.resolveCollisions))b[a.GetUserData()].collisions=
this.collisions[a.GetUserData()]||null;return b},updateExternalState:function(b){var a=this.getState(),g;for(g in a){var c=b[g];c&&!c.staticBody&&c.update(a[g])}},setBodies:function(b){for(var a in b)this.addBody(b[a]);this.ready=!0},addBody:function(b){if(!b.alreadyScaled)b.scaleShape(1/this.scale),b.scale=this.scale;var a=new e,g=new j,c,d,p,o;g.restitution=b.restitution;g.density=b.density;g.friction=b.friction;if(null!=b.maskBits)g.filter.maskBits=b.maskBits;if(null!=b.categoryBits)g.filter.categoryBits=
b.categoryBits;if(null!=b.groupIndex)g.filter.groupIndex=b.groupIndex;a.type=b.staticBody?h.b2_staticBody:h.b2_dynamicBody;a.position.x=b.x;a.position.y=b.y;a.userData=b.id;a.angle=b.angle;a.linearDamping=b.linearDamping;a.angularDamping=b.angularDamping;var n=this.b2World.CreateBody(a);if(b.radius)g.shape=new k(b.radius),n.CreateFixture(g);else if(b.points){d=[];for(a=0;a<b.points.length;a++)p=new f,p.Set(b.points[a].x,b.points[a].y),d[a]=p;g.shape=new i;g.shape.SetAsArray(d,d.length);n.CreateFixture(g)}else if(b.polys)for(c=
0;c<b.polys.length;c++){d=b.polys[c];o=[];for(a=0;a<d.length;a++)p=new f,p.Set(d[a].x,d[a].y),o[a]=p;g.shape=new i;g.shape.SetAsArray(o,o.length);n.CreateFixture(g)}else g.shape=new i,g.shape.SetAsBox(b.halfWidth,b.halfHeight),n.CreateFixture(g);this.bodiesMap[b.id]=n},setPosition:function(b,a,g){this.bodiesMap[b].SetPosition(new f(a,g))},setAngle:function(b,a){this.bodiesMap[b].SetAngle(a)},setLinearVelocity:function(b,a,g){this.bodiesMap[b].SetLinearVelocity(new f(a,g))},setAngularVelocity:function(b,
a){this.bodiesMap[b].SetAngularVelocity(a)},applyImpulseDegrees:function(b,a,g){b=this.bodiesMap[b];b.ApplyImpulse(new f(Math.sin(a*(Math.PI/180))*g,-1*Math.cos(a*(Math.PI/180))*g),b.GetWorldCenter())},applyForceDegrees:function(b,a,g){b=this.bodiesMap[b];b.ApplyForce(new f(Math.sin(a*(Math.PI/180))*g,-1*Math.cos(a*(Math.PI/180))*g),b.GetWorldCenter())},applyImpulse:function(b,a,g){b=this.bodiesMap[b];b.ApplyImpulse(new f(Math.sin(a)*g,-1*Math.cos(a)*g),b.GetWorldCenter())},applyForce:function(b,
a,g){b=this.bodiesMap[b];b.ApplyForce(new f(Math.sin(a)*g,-1*Math.cos(a)*g),b.GetWorldCenter())},applyTorque:function(b,a){this.bodiesMap[b].ApplyTorque(a)},setGravity:function(b){this.b2World.SetGravity(new f(b.x,b.y))},removeBody:function(b){this.bodiesMap[b]&&(this.fixturesMap[b]&&this.bodiesMap[b].DestroyFixture(this.fixturesMap[b]),this.b2World.DestroyBody(this.bodiesMap[b]),delete this.bodiesMap[b])},wakeUpBody:function(b){this.bodiesMap[b]&&this.bodiesMap[b].SetAwake(!0)},addContactListener:function(b){var a=
new Box2D.Dynamics.b2ContactListener;if(b.beginContact)a.BeginContact=function(a){b.beginContact(a.GetFixtureA().GetBody().GetUserData(),a.GetFixtureB().GetBody().GetUserData())};if(b.endContact)a.endContact=function(a){b.endContact(a.GetFixtureA().GetBody().GetUserData(),a.GetFixtureB().GetBody().GetUserData())};if(b.postSolve)a.PostSolve=function(a,c){b.postSolve(a.GetFixtureA().GetBody().GetUserData(),a.GetFixtureB().GetBody().GetUserData(),c.normalImpulses[0])};this.b2World.SetContactListener(a)},
destroyJoint:function(b){this.removeJoint(b)},removeJoint:function(b){this.jointsMap[b]&&(this.b2World.DestroyJoint(this.jointsMap[b]),delete this.jointsMap[b])},addJoint:function(b){if(b&&b.id&&!this.jointsMap[b.id]){if(!b.alreadyScaled&&b.scaleJointLocation)b.scaleJointLocation(1/this.scale),b.scale=this.scale;var a=b.createB2Joint(this);a&&(this.jointsMap[b.id]=a)}},beginContact:function(){},endContact:function(){},postSolve:function(b,a,g){this.collisions[b]=this.collisions[b]||[];this.collisions[b].push({id:a,
impulse:g});this.collisions[a]=this.collisions[a]||[];this.collisions[a].push({id:b,impulse:g})}})})},"dcl/dcl":function(){(function(a){"undefined"!=typeof define?define(["./mini"],a):"undefined"!=typeof module?module.exports=a(require("./mini")):dcl=a(dcl)})(function(a){function d(){}function f(a,c,e){var f=a||d,b=c||d,l=e||d,g=function(){var a;f.apply(this,arguments);try{a=l.apply(this,arguments)}catch(g){a=g}b.call(this,arguments,a);if(a instanceof Error)throw a;return a};g.advices={b:a,a:c,f:e};
return g}function e(e){return function(c,d){var f=c._m,b;f&&((b=+f.w[d]||0)&&b!=e&&a._e("set chaining",d,c,e,b),f.w[d]=e)}}var h=a(a.Super,{constructor:function(){this.b=this.f.before;this.a=this.f.after;this.f=this.f.around}});a.mix(a,{Advice:h,advise:function(a){return new h(a)},before:function(a){return new h({before:a})},after:function(a){return new h({after:a})},around:a.superCall,chainBefore:e(1),chainAfter:e(2),isInstanceOf:function(a,c){if(a instanceof c)return!0;var e=a.constructor._m,d;
if(e)for(e=e.b,d=e.length-1;0<=d;--d)if(e[d]===c)return!0;return!1},_sb:function(e,c,d,h){var h=h[d]=a._ec(c,d,"f"),b=a._ec(c,d,"b").reverse(),c=a._ec(c,d,"a"),h=e?a._st(h,1==e?function(b){return a._sc(b.reverse())}:a._sc,d):a._ss(h,d);return!b.length&&!c.length?h||function(){}:f(a._sc(b),a._sc(c),h)}});return a})},"dcl/mini":function(){(function(a){"undefined"!=typeof define?define([],a):"undefined"!=typeof module?module.exports=a():dcl=a()})(function(){function a(b,g){var c=[0],d,i,l,m,s,q,r,w,
v=0,t;if(b)if(b instanceof Array){m={};r=b.slice(0).reverse();for(w=r.length-1;0<=w;--w)if(i=r[w],i._u=i._u||e++,d=i._m){for(q=d.b,v=q.length-1;0<v;--v)t=q[v]._u,m[t]=(m[t]||0)+1;r[w]=q.slice(0)}else r[w]=[i];s={};a:for(;r.length;){for(w=0;w<r.length;++w)if(q=r[w],i=q[0],t=i._u,!m[t]){s[t]||(c.push(i),s[t]=1);q.shift();q.length?--m[q[0]._u]:r.splice(w,1);continue a}a._e("cycle",g,r)}b=b[0];v=c.length-((m=b._m)&&b===c[c.length-(v=m.b.length)]?v:1)-1}else b._u=b._u||e++,c=c.concat((m=b._m)?m.b:b);d=
b?a.delegate(b[j]):{};for(q=b&&(m=b._m)?a.delegate(m.w):{constructor:2};0<v;--v)if(i=c[v],m=i._m,k(d,m&&m.h||i[j]),m)for(t in r=m.w)q[t]=(+q[t]||0)|r[t];for(t in g)f(m=g[t])?q[t]=+q[t]||0:d[t]=m;s={b:c,h:g,w:q,c:{}};c[0]={_m:s,prototype:d};i=d;m=s.w;q=s.b;r=s.c;for(l in m)i[l]=a._sb(m[l],q,l,r);l=d[h];l._m=s;l[j]=d;c[0]=l;return a._p(l)}function d(b){this.f=b}function f(b){return b instanceof d}var e=0,h="constructor",j="prototype",c=function(){},i={},k,b,l,g,m;(k=function(b,a){for(var g in a)b[g]=
a[g]})(a,{mix:k,delegate:function(b){c[j]=b;b=new c;c[j]=null;return b},Super:d,superCall:function(b){return new d(b)},_p:function(b){return b},_e:function(b){throw Error("dcl: "+b);},_f:function(b,a){var g=b.f(a);g.ctr=b.ctr;return g},_ec:b=function(b,a,g){for(var c=b.length-1,e=[],d,m,l="f"==g;d=b[c];--c)if((m=d._m)?(m=m.h).hasOwnProperty(a)&&(f(m=m[a])?l?m.f:m=m[g]:l):l&&(m=d[j][a])&&m!==i[a])m.ctr=d,e.push(m);return e},_sc:g=function(b){var a=b.length,g;return!a?0:1==a?(g=b[0],function(){g.apply(this,
arguments)}):function(){for(var g=0;g<a;++g)b[g].apply(this,arguments)}},_ss:l=function(b,g){for(var c=0,e,d=i[g];e=b[c];++c)d=f(e)?b[c]=a._f(e,d,g):e;return g!=h?d:function(){d.apply(this,arguments)}},_st:m=function(b,g,c){for(var e=0,d,i,m=0;d=b[e];++e)f(d)&&(i=e-m,b[e]=a._f(d,!i?0:1==i?b[m]:g(b.slice(m,e)),c),m=e);i=e-m;return!i?0:1==i&&c!=h?b[m]:g(m?b.slice(m):b)},_sb:function(a,c,e,d){c=d[e]=b(c,e,"f");return(a?m(c,g,e):l(c,e))||function(){}}});return a})},"dcl/bases/Mixer":function(){(function(a){"undefined"!=
typeof define?define(["../mini"],a):"undefined"!=typeof module?module.exports=a(require("../mini")):dclBasesMixer=a(dcl)})(function(a){return a(null,{declaredClass:"dcl/bases/Mixer",constructor:function(d){a.mix(this,d)}})})},"dojo/_base/lang":function(){define(["./kernel","../has","../sniff"],function(a,d){d.add("bug-for-in-skips-shadowed",function(){for(var b in{toString:1})return 0;return 1});var f=d("bug-for-in-skips-shadowed")?"hasOwnProperty.valueOf.isPrototypeOf.propertyIsEnumerable.toLocaleString.toString.constructor".split("."):
[],e=f.length,h=function(b,c,g){var e,d=0,f=a.global;if(!g)if(b.length){e=b[d++];try{g=a.scopeMap[e]&&a.scopeMap[e][1]}catch(i){}g=g||(e in f?f[e]:c?f[e]={}:void 0)}else return f;for(;g&&(e=b[d++]);)g=e in g?g[e]:c?g[e]={}:void 0;return g},j=Object.prototype.toString,c=function(b,a,g){return(g||[]).concat(Array.prototype.slice.call(b,a||0))},i=/\{([^\}]+)\}/g,k={_extraNames:f,_mixin:function(b,a,g){var c,i,h,j={};for(c in a)if(i=a[c],!(c in b)||b[c]!==i&&(!(c in j)||j[c]!==i))b[c]=g?g(i):i;if(d("bug-for-in-skips-shadowed")&&
a)for(h=0;h<e;++h)if(c=f[h],i=a[c],!(c in b)||b[c]!==i&&(!(c in j)||j[c]!==i))b[c]=g?g(i):i;return b},mixin:function(b,a){b||(b={});for(var g=1,c=arguments.length;g<c;g++)k._mixin(b,arguments[g]);return b},setObject:function(b,a,g){var c=b.split("."),b=c.pop();return(g=h(c,!0,g))&&b?g[b]=a:void 0},getObject:function(b,a,g){return h(b.split("."),a,g)},exists:function(b,a){return void 0!==k.getObject(b,!1,a)},isString:function(b){return"string"==typeof b||b instanceof String},isArray:function(b){return b&&
(b instanceof Array||"array"==typeof b)},isFunction:function(b){return"[object Function]"===j.call(b)},isObject:function(b){return void 0!==b&&(null===b||"object"==typeof b||k.isArray(b)||k.isFunction(b))},isArrayLike:function(b){return b&&void 0!==b&&!k.isString(b)&&!k.isFunction(b)&&!(b.tagName&&"form"==b.tagName.toLowerCase())&&(k.isArray(b)||isFinite(b.length))},isAlien:function(b){return b&&!k.isFunction(b)&&/\{\s*\[native code\]\s*\}/.test(""+b)},extend:function(b,a){for(var g=1,c=arguments.length;g<
c;g++)k._mixin(b.prototype,arguments[g]);return b},_hitchArgs:function(b,c){var g=k._toArray(arguments,2),e=k.isString(c);return function(){var d=k._toArray(arguments),f=e?(b||a.global)[c]:c;return f&&f.apply(b||this,g.concat(d))}},hitch:function(b,c){if(2<arguments.length)return k._hitchArgs.apply(a,arguments);c||(c=b,b=null);if(k.isString(c)){b=b||a.global;if(!b[c])throw['lang.hitch: scope["',c,'"] is null (scope="',b,'")'].join("");return function(){return b[c].apply(b,arguments||[])}}return!b?
c:function(){return c.apply(b,arguments||[])}},delegate:function(){function b(){}return function(a,c){b.prototype=a;var e=new b;b.prototype=null;c&&k._mixin(e,c);return e}}(),_toArray:d("ie")?function(){function b(b,a,c){c=c||[];for(a=a||0;a<b.length;a++)c.push(b[a]);return c}return function(a){return(a.item?b:c).apply(this,arguments)}}():c,partial:function(b){return k.hitch.apply(a,[null].concat(k._toArray(arguments)))},clone:function(b){if(!b||"object"!=typeof b||k.isFunction(b))return b;if(b.nodeType&&
"cloneNode"in b)return b.cloneNode(!0);if(b instanceof Date)return new Date(b.getTime());if(b instanceof RegExp)return RegExp(b);var a,c,e;if(k.isArray(b)){a=[];for(c=0,e=b.length;c<e;++c)c in b&&a.push(k.clone(b[c]))}else a=b.constructor?new b.constructor:{};return k._mixin(a,b,k.clone)},trim:String.prototype.trim?function(b){return b.trim()}:function(b){return b.replace(/^\s\s*/,"").replace(/\s\s*$/,"")},replace:function(b,a,c){return b.replace(c||i,k.isFunction(a)?a:function(b,c){return k.getObject(c,
!1,a)})}};k.mixin(a,k);return k})},"dojo/_base/kernel":function(){define(["../has","./config","require","module"],function(a,d,f,e){var h,a={},j={},c={config:d,global:this,dijit:a,dojox:j},a={dojo:["dojo",c],dijit:["dijit",a],dojox:["dojox",j]},e=f.map&&f.map[e.id.match(/[^\/]+/)[0]];for(h in e)a[h]?a[h][0]=e[h]:a[h]=[e[h],{}];for(h in a)e=a[h],e[1]._scopeName=e[0],d.noGlobals||(this[e[0]]=e[1]);c.scopeMap=a;c.baseUrl=c.config.baseUrl=f.baseUrl;c.isAsync=f.async;c.locale=d.locale;d="$Rev: 30226 $".match(/\d+/);
c.version={major:1,minor:8,patch:3,flag:"",revision:d?+d[0]:NaN,toString:function(){var a=c.version;return a.major+"."+a.minor+"."+a.patch+a.flag+" ("+a.revision+")"}};Function("d","d.eval = function(){return d.global.eval ? d.global.eval(arguments[0]) : eval(arguments[0]);}")(c);c.exit=function(){};c.deprecated=c.experimental=function(){};c._hasResource={};return c})},"dojo/has":function(){define(["require","module"],function(a){var d=a.has||function(){};d.add("touch","ontouchstart"in document);
d.add("device-width",screen.availWidth||innerWidth);a=document.createElement("form");d.add("dom-attributes-explicit",0==a.attributes.length);d.add("dom-attributes-specified-flag",0<a.attributes.length&&40>a.attributes.length);d.clearElement=function(a){a.innerHTML="";return a};d.normalize=function(a,e){var h=a.match(/[\?:]|[^:\?]*/g),j=0,c=function(a){var e=h[j++];if(":"==e)return 0;if("?"==h[j++]){if(!a&&d(e))return c();c(!0);return c(a)}return e||0};return(a=c())&&e(a)};d.load=function(a,e,d){a?
e([a],d):d()};return d})},"dojo/_base/config":function(){define(["../has","require"],function(a,d){var f={},e=d.rawConfig,h;for(h in e)f[h]=e[h];return f})},"dojo/sniff":function(){define(["./has"],function(a){var d=navigator,f=d.userAgent,d=d.appVersion,e=parseFloat(d);a.add("air",0<=f.indexOf("AdobeAIR"));a.add("khtml",0<=d.indexOf("Konqueror")?e:void 0);a.add("webkit",parseFloat(f.split("WebKit/")[1])||void 0);a.add("chrome",parseFloat(f.split("Chrome/")[1])||void 0);a.add("safari",0<=d.indexOf("Safari")&&
!a("chrome")?parseFloat(d.split("Version/")[1]):void 0);a.add("mac",0<=d.indexOf("Macintosh"));a.add("quirks","BackCompat"==document.compatMode);a.add("ios",/iPhone|iPod|iPad/.test(f));a.add("android",parseFloat(f.split("Android ")[1])||void 0);if(!a("webkit")){0<=f.indexOf("Opera")&&a.add("opera",9.8<=e?parseFloat(f.split("Version/")[1])||e:e);0<=f.indexOf("Gecko")&&!a("khtml")&&!a("webkit")&&a.add("mozilla",e);a("mozilla")&&a.add("ff",parseFloat(f.split("Firefox/")[1]||f.split("Minefield/")[1])||
void 0);if(document.all&&!a("opera"))f=parseFloat(d.split("MSIE ")[1])||void 0,(d=document.documentMode)&&5!=d&&Math.floor(f)!=d&&(f=d),a.add("ie",f);a.add("wii","undefined"!=typeof opera&&opera.wiiremote)}return a})},"frozen/box2d/BoxGame":function(){define("frozen/box2d/BoxGame",["../GameCore","./Box","dcl"],function(a,d,f){return f(a,{box:null,boxUpdating:!0,entities:null,joints:null,constructor:function(){if(!this.box)this.box=new d;if(!this.entities)this.entities={};if(!this.joints)this.joints=
{}},preUpdate:function(a){this.boxUpdating&&(this.box.update(a),this.box.updateExternalState(this.entities))},addBody:function(a){this.entities[a.id]=a;this.box.addBody(a)},removeBody:function(a){this.box.removeBody(a.id);delete this.entities[a.id]},addJoint:function(a){this.joints[a.id]=a;this.box.addJoint(a)},removeJoint:function(a){this.box.removeJoint(a.id);delete this.joints[a.id]}})})},"frozen/GameCore":function(){define("frozen/GameCore","dcl,dcl/bases/Mixer,dojo/_base/lang,dojo/dom,./InputManager,./ResourceManager,./shims/RAF".split(","),
function(a,d,f,e,h,j){return a(d,{statics:{FONT_SIZE:24},isRunning:!1,canvasId:null,maxStep:40,contextType:"2d",height:0,width:0,resourceManager:null,inputManager:null,loadingForeground:"#00F",loadingBackground:"#FFF",gameAreaId:null,canvasPercentage:0,setHeight:function(a){this.height=a;this.canvas.height=a},setWidth:function(a){this.width=a;this.canvas.width=a},stop:function(){this.isRunning=!1},run:function(){this.isRunning||(this.init(),this.loadResources(this.resourceManager),this.initInput(this.inputManager),
this.launchLoop())},loadResources:function(){},init:function(){if(!this.canvas)this.canvas=e.byId(this.canvasId);if(this.canvas){if(!this.context)this.context=this.canvas.getContext(this.contextType);if(this.context){this.setHeight(this.height||this.canvas.height);this.setWidth(this.width||this.canvas.width);if(!this.inputManager)this.inputManager=this.gameAreaId&&this.canvasPercentage?new h({canvas:this.canvas,gameArea:e.byId(this.gameAreaId),canvasPercentage:this.canvasPercentage}):new h({canvas:this.canvas});
this.inputManager.resize();if(!this.resourceManager)this.resourceManager=new j;this.loadResources(this.resourceManager);this.isRunning=!0}else alert("Sorry, your browser does not support a "+this.contextType+" drawing surface on canvas.  I recommend any browser but Internet Explorer")}else alert("Sorry, your browser does not support canvas.  I recommend any browser but Internet Explorer")},initInput:function(){},handleInput:function(){},gameLoop:function(){this.currTime=(new Date).getTime();this.elapsedTime=
Math.min(this.currTime-this.prevTime,this.maxStep);this.prevTime=this.currTime;this.resourceManager&&!this.resourceManager.resourcesReady()?(this.updateLoadingScreen(this.elapsedTime),this.drawLoadingScreen(this.context)):(this.handleInput(this.inputManager,this.elapsedTime),this.paused||(this.preUpdate(this.elapsedTime),this.update(this.elapsedTime)),this.context.save(),this.draw(this.context),this.context.restore())},launchLoop:function(){this.elapsedTime=0;var a=Date.now();this.prevTime=this.currTime=
a;this.loopRunner=f.hitch(this,this.loopRunner);window.requestAnimationFrame(this.loopRunner)},loopRunner:function(){this.gameLoop();window.requestAnimationFrame(this.loopRunner)},preUpdate:function(){},update:function(){},updateLoadingScreen:function(){},draw:function(a){if("2d"===this.contextType)a.font="14px sans-serif",a.fillText("This game does not have its own draw function!",10,50)},drawLoadingScreen:function(a){if(this.resourceManager&&"2d"===this.contextType)a.fillStyle=this.loadingBackground,
a.fillRect(0,0,this.width,this.height),a.fillStyle=this.loadingForeground,a.strokeStyle=this.loadingForeground,a.font="bold "+Math.floor(this.height/12)+"px sans-serif",a.fillText("Loading... "+this.resourceManager.getPercentComplete()+"%",0.1*this.width,0.55*this.height),a.strokeRect(0.1*this.width,0.7*this.height,0.8*this.width,0.1*this.height),a.fillRect(0.1*this.width,0.7*this.height,0.8*this.width*this.resourceManager.getPercentComplete()/100,0.1*this.height),a.lineWidth=4}})})},"dojo/dom":function(){define(["./sniff",
"./_base/window"],function(a,d){if(7>=a("ie"))try{document.execCommand("BackgroundImageCache",!1,!0)}catch(f){}var e={};e.byId=a("ie")?function(a,c){if("string"!=typeof a)return a;var e=c||d.doc,f=a&&e.getElementById(a);if(f&&(f.attributes.id.value==a||f.id==a))return f;e=e.all[a];if(!e||e.nodeName)e=[e];for(var b=0;f=e[b++];)if(f.attributes&&f.attributes.id&&f.attributes.id.value==a||f.id==a)return f}:function(a,c){return("string"==typeof a?(c||d.doc).getElementById(a):a)||null};e.isDescendant=function(a,
c){try{a=e.byId(a);for(c=e.byId(c);a;){if(a==c)return!0;a=a.parentNode}}catch(d){}return!1};a.add("css-user-select",function(a,c,e){if(!e)return!1;var a=e.style,c=["Khtml","O","ms","Moz","Webkit"],e=c.length,d="userSelect";do if("undefined"!==typeof a[d])return d;while(e--&&(d=c[e]+"UserSelect"));return!1});var h=a("css-user-select");e.setSelectable=h?function(a,c){e.byId(a).style[h]=c?"":"none"}:function(a,c){var a=e.byId(a),d=a.getElementsByTagName("*"),f=d.length;if(c)for(a.removeAttribute("unselectable");f--;)d[f].removeAttribute("unselectable");
else for(a.setAttribute("unselectable","on");f--;)d[f].setAttribute("unselectable","on")};return e})},"dojo/_base/window":function(){define(["./kernel","./lang","../sniff"],function(a,d,f){var e={global:a.global,doc:this.document||null,body:function(e){e=e||a.doc;return e.body||e.getElementsByTagName("body")[0]},setContext:function(d,f){a.global=e.global=d;a.doc=e.doc=f},withGlobal:function(d,f,c,i){var k=a.global;try{return a.global=e.global=d,e.withDoc.call(null,d.document,f,c,i)}finally{a.global=
e.global=k}},withDoc:function(d,j,c,i){var k=e.doc,b=f("quirks"),l=f("ie"),g,m,u;try{a.doc=e.doc=d;a.isQuirks=f.add("quirks","BackCompat"==a.doc.compatMode,!0,!0);if(f("ie")&&(u=d.parentWindow)&&u.navigator)g=parseFloat(u.navigator.appVersion.split("MSIE ")[1])||void 0,(m=d.documentMode)&&5!=m&&Math.floor(g)!=m&&(g=m),a.isIE=f.add("ie",g,!0,!0);c&&"string"==typeof j&&(j=c[j]);return j.apply(c,i||[])}finally{a.doc=e.doc=k,a.isQuirks=f.add("quirks",b,!0,!0),a.isIE=f.add("ie",l,!0,!0)}}};d.mixin(a,e);
return e})},"frozen/InputManager":function(){define("frozen/InputManager","./GameAction,./MouseAction,./utils/insideCanvas,dcl,dcl/bases/Mixer,dcl/mixins/Cleanup,dojo/has,dojo/on,dojo/dom-style,dojo/dom-geometry,dojo/_base/lang,dojo/domReady!".split(","),function(a,d,f,e,h,j,c,i,k,b,l){return e([h,j],{keyActions:[],mouseAction:null,touchAction:null,canvas:null,handleMouse:!0,handleTouch:!0,handleKeys:!0,gameArea:null,canvasPercentage:null,constructor:function(){function b(a){a.remove()}this.handleKeys&&
(this.pushCleanup(i(document,"keydown",l.hitch(this,"keyDown")),b),this.pushCleanup(i(document,"keyup",l.hitch(this,"keyReleased")),b));this.handleMouse&&!c("touch")&&(this.pushCleanup(i(document,"mousedown",l.hitch(this,"mouseDown")),b),this.pushCleanup(i(document,"mousemove",l.hitch(this,"mouseMove")),b),this.pushCleanup(i(document,"mouseup",l.hitch(this,"mouseUp")),b));this.handleTouch&&c("touch")&&(this.pushCleanup(i(document,"touchstart",l.hitch(this,"touchStart")),b),this.pushCleanup(i(document,
"touchmove",l.hitch(this,"touchMove")),b),this.pushCleanup(i(document,"touchend",l.hitch(this,"touchEnd")),b));if(!this.mouseAction)this.mouseAction=new d;if(!this.touchAction)this.touchAction=new d;this.gameArea&&this.canvasPercentage&&(this.pushCleanup(i(window,"resize",l.hitch(this,"resize")),b),this.pushCleanup(i(window,"orientationchange",l.hitch(this,"resize")),b))},mapToKey:function(b,a){if(!this.keyActions)this.keyActions=[];this.keyActions[a]=b},addKeyAction:function(b,c){var e=new a;if(c)e.behavior=
e.statics.DETECT_INITAL_PRESS_ONLY;this.mapToKey(e,b);return e},mouseUp:function(b){this.mouseAction.release();this.mouseAction.endPosition=this.getMouseLoc(b)},mouseDown:function(b){b=this.getMouseLoc(b);this.mouseAction.endPosition=null;this.mouseAction.insideCanvas=f(b,this.canvas);this.mouseAction.insideCanvas?(this.mouseAction.press(),this.mouseAction.startPosition=b,this.mouseAction.position=b):this.mouseAction.startPosition=null},mouseMove:function(b){this.mouseAction.position=this.getMouseLoc(b)},
touchStart:function(b){b=this.getMouseLoc(b.changedTouches[0]);this.touchAction.endPosition=null;this.touchAction.insideCanvas=f(b,this.canvas);this.touchAction.insideCanvas?(this.touchAction.press(),this.touchAction.startPosition=b,this.touchAction.position=b):this.touchAction.startPosition=null},touchEnd:function(b){this.touchAction.release();this.touchAction.endPosition=this.getMouseLoc(b.changedTouches[0])},touchMove:function(b){this.touchAction.position=this.getMouseLoc(b.changedTouches[0]);
this.touchAction.startPosition&&b.preventDefault()},getKeyAction:function(b){return this.keyActions.length?this.keyActions[b.keyCode]||this.keyActions[String.fromCharCode(b.keyCode)]:null},keyPressed:function(b){(b=this.getKeyAction(b))&&!b.isPressed()&&b.press()},keyDown:function(b){(b=this.getKeyAction(b))&&!b.isPressed()&&b.press()},keyReleased:function(b){(b=this.getKeyAction(b))&&b.release()},getMouseLoc:function(a){var c=b.position(this.canvas);return this.zoomRatio?{x:Math.round((a.clientX-
c.x)/this.zoomRatio),y:Math.round((a.clientY-c.y)/this.zoomRatio)}:{x:Math.round(a.clientX-c.x),y:Math.round(a.clientY-c.y)}},resize:function(){if(this.gameArea&&this.canvasPercentage&&this.canvas){var a=this.canvas.width,c=this.canvas.height,e=b.getMarginExtents(document.body),d=window.innerWidth-e.w,e=window.innerHeight-e.h,c=a/c,f="",i="";d/e>c?(d=e*c,f=d+"px",i=e+"px"):(f=d+"px",i=Math.round(d/c)+"px");this.zoomRatio=d/a*this.canvasPercentage;k.set(this.gameArea,{width:f,height:i});a=Math.floor(100*
this.canvasPercentage)+"%";k.set(this.canvas,{width:a,height:a,display:"block",marginLeft:"auto",marginRight:"auto"})}}})})},"frozen/GameAction":function(){define("frozen/GameAction",["dcl","dcl/bases/Mixer"],function(a,d){return a(d,{name:null,behavior:0,amount:0,state:0,statics:{NORMAL:0,DETECT_INITAL_PRESS_ONLY:1,STATE_RELEASED:0,STATE_PRESSED:1,STATE_WAITING_FOR_RELEASE:2,STATE_MOVED:3},constructor:function(){this.reset()},reset:function(){this.state=this.statics.STATE_RELEASED;this.amount=0},
tap:function(){this.press();this.release()},press:function(){this.state=this.statics.STATE_PRESSED;this.behavior===this.statics.DETECT_INITAL_PRESS_ONLY&&this.pressAmt(1)},pressAmt:function(a){if(this.state!==this.statics.STATE_WAITING_FOR_RELEASE)this.amount+=a,this.state=this.statics.STATE_WAITING_FOR_RELEASE},release:function(){this.state=this.statics.STATE_RELEASED},isPressed:function(){return this.state===this.statics.STATE_PRESSED?!0:!1},getAmount:function(){var a=this.amount;if(0!==a)if(this.state===
this.statics.STATE_RELEASED)this.amount=0;else if(this.behavior===this.statics.DETECT_INITAL_PRESS_ONLY)this.state=this.statics.STATE_WAITING_FOR_RELEASE,this.amount=0;return a}})})},"frozen/MouseAction":function(){define("frozen/MouseAction",["dcl","dcl/bases/Mixer","./GameAction"],function(a,d,f){return a([d,f],{startPosition:null,endPosition:null,position:null})})},"frozen/utils/insideCanvas":function(){define("frozen/utils/insideCanvas",function(){return function(a,d){return 0>a.x||a.x>d.width||
0>a.y||a.y>d.height?!1:!0}})},"dcl/mixins/Cleanup":function(){(function(a){"undefined"!=typeof define?define(["../dcl","./Destroyable"],a):"undefined"!=typeof module?module.exports=a(require("../dcl"),require("./Destroyable")):dclMixinsCleanup=a(dcl,dclMixinsDestroyable)})(function(a,d){return a(d,{declaredClass:"dcl/mixins/Cleanup",constructor:function(){this.__cleanupStack=[]},pushCleanup:function(a,e){var d=e?function(){e(a)}:function(){a.destroy()};this.__cleanupStack.push(d);return d},popCleanup:function(a){if(a)return this.__cleanupStack.pop();
this.__cleanupStack.pop()()},removeCleanup:function(a){for(var e=this.__cleanupStack.length-1;0<=e;--e)if(this.__cleanupStack[e]===a)return this.__cleanupStack.splice(e,1),!0},cleanup:function(){for(;this.__cleanupStack.length;)this.__cleanupStack.pop()()},destroy:function(){this.cleanup()}})})},"dcl/mixins/Destroyable":function(){(function(a){"undefined"!=typeof define?define(["../dcl"],a):"undefined"!=typeof module?module.exports=a(require("../dcl")):dclMixinsDestroyable=a(dcl)})(function(a){var d=
a(null,{declaredClass:"dcl/mixins/Destroyable"});a.chainBefore(d,"destroy");return d})},"dojo/on":function(){define(["require","./_base/kernel","./has"],function(a,d,f){function e(b,a,e,g,d){if(g=a.match(/(.*):(.*)/))return a=g[2],g=g[1],c.selector(g,a).call(d,b,e);f("touch")&&(i.test(a)&&(e=o(e)),!f("event-orientationchange")&&"orientationchange"==a&&(a="resize",b=window,e=o(e)));m&&(e=m(e));if(b.addEventListener){var h=a in l,j=h?l[a]:a;b.addEventListener(j,e,h);return{remove:function(){b.removeEventListener(j,
e,h)}}}a="on"+a;throw Error("Target must be an event emitter");}function h(){this.cancelable=!1}function j(){this.bubbles=!1}a=window.ScriptEngineMajorVersion;f.add("jscript",a&&a()+ScriptEngineMinorVersion()/10);f.add("event-orientationchange",f("touch")&&!f("android"));f.add("event-stopimmediatepropagation",window.Event&&!!window.Event.prototype&&!!window.Event.prototype.stopImmediatePropagation);var c=function(b,a,g,d){return"function"==typeof b.on&&"function"!=typeof a?b.on(a,g):c.parse(b,a,g,
e,d,this)};c.pausable=function(b,a,e,g){var d,b=c(b,a,function(){if(!d)return e.apply(this,arguments)},g);b.pause=function(){d=!0};b.resume=function(){d=!1};return b};c.once=function(b,a,e){var g=c(b,a,function(){g.remove();return e.apply(this,arguments)});return g};c.parse=function(b,a,c,e,g,d){if(a.call)return a.call(d,b,c);if(-1<a.indexOf(",")){for(var a=a.split(/\s*,\s*/),f=[],i=0,h;h=a[i++];)f.push(e(b,h,c,g,d));f.remove=function(){for(var b=0;b<f.length;b++)f[b].remove()};return f}return e(b,
a,c,g,d)};var i=/^touch/;c.selector=function(b,a,e){return function(g,f){function i(a){for(h=h&&h.matches?h:d.query;!h.matches(a,b,g);)if(a==g||!1===e||!(a=a.parentNode)||1!=a.nodeType)return;return a}var h="function"==typeof b?{matches:b}:this,j=a.bubble;return j?c(g,j(i),f):c(g,a,function(b){var a=i(b.target);return a&&f.call(a,b)})}};var k=[].slice,b=c.emit=function(b,a,c){var e=k.call(arguments,2),g="on"+a;if("parentNode"in b){var d=e[0]={},f;for(f in c)d[f]=c[f];d.preventDefault=h;d.stopPropagation=
j;d.target=b;d.type=a;c=d}do b[g]&&b[g].apply(b,e);while(c&&c.bubbles&&(b=b.parentNode));return c&&c.cancelable&&c},l={};if(!f("event-stopimmediatepropagation"))var g=function(){this.modified=this.immediatelyStopped=!0},m=function(b){return function(a){if(!a.immediatelyStopped)return a.stopImmediatePropagation=g,b.apply(this,arguments)}};l={focusin:"focus",focusout:"blur"};c.emit=function(a,e,g){if(a.dispatchEvent&&document.createEvent){var d=a.ownerDocument.createEvent("HTMLEvents");d.initEvent(e,
!!g.bubbles,!!g.cancelable);for(var f in g)f in d||(d[f]=g[f]);return a.dispatchEvent(d)&&d}return b.apply(c,arguments)};if(f("touch"))var u=function(){},p=window.orientation,o=function(b){return function(a){var c=a.corrected;if(!c){var e=a.type;try{delete a.type}catch(g){}a.type?(u.prototype=a,c=new u,c.preventDefault=function(){a.preventDefault()},c.stopPropagation=function(){a.stopPropagation()}):(c=a,c.type=e);a.corrected=c;if("resize"==e){if(p==window.orientation)return null;p=window.orientation;
c.type="orientationchange";return b.call(this,c)}if(!("rotation"in c))c.rotation=0,c.scale=1;var e=c.changedTouches[0],d;for(d in e)delete c[d],c[d]=e[d]}return b.call(this,c)}};return c})},"dojo/dom-style":function(){define("dojo/dom-style",["./sniff","./dom"],function(a,d){function f(c,e,g){e=e.toLowerCase();if(a("ie")){if("auto"==g){if("height"==e)return c.offsetHeight;if("width"==e)return c.offsetWidth}if("fontweight"==e)switch(g){case 700:return"bold";default:return"normal"}}e in b||(b[e]=l.test(e));
return b[e]?j(c,g):g}var e,h={};e=a("webkit")?function(b){var a;if(1==b.nodeType){var c=b.ownerDocument.defaultView;a=c.getComputedStyle(b,null);if(!a&&b.style)b.style.display="",a=c.getComputedStyle(b,null)}return a||{}}:a("ie")&&(9>a("ie")||a("quirks"))?function(b){return 1==b.nodeType&&b.currentStyle?b.currentStyle:{}}:function(b){return 1==b.nodeType?b.ownerDocument.defaultView.getComputedStyle(b,null):{}};h.getComputedStyle=e;var j;j=a("ie")?function(b,a){if(!a)return 0;if("medium"==a)return 4;
if(a.slice&&"px"==a.slice(-2))return parseFloat(a);var c=b.style,e=b.runtimeStyle,g=c.left,d=e.left;e.left=b.currentStyle.left;try{c.left=a,a=c.pixelLeft}catch(f){a=0}c.left=g;e.left=d;return a}:function(b,a){return parseFloat(a)||0};h.toPixelValue=j;var c=function(b,a){try{return b.filters.item("DXImageTransform.Microsoft.Alpha")}catch(c){return a?{}:null}},i=9>a("ie")||10>a("ie")&&a("quirks")?function(b){try{return c(b).Opacity/100}catch(a){return 1}}:function(b){return e(b).opacity},k=9>a("ie")||
10>a("ie")&&a("quirks")?function(b,a){var e=100*a,g=1==a;b.style.zoom=g?"":1;if(c(b))c(b,1).Opacity=e;else{if(g)return a;b.style.filter+=" progid:DXImageTransform.Microsoft.Alpha(Opacity="+e+")"}c(b,1).Enabled=!g;if("tr"==b.tagName.toLowerCase())for(e=b.firstChild;e;e=e.nextSibling)"td"==e.tagName.toLowerCase()&&k(e,a);return a}:function(b,a){return b.style.opacity=a},b={left:!0,top:!0},l=/margin|padding|width|height|max|min|offset/,g=a("ie")?"styleFloat":"cssFloat",m={cssFloat:g,styleFloat:g,"float":g};
h.get=function(b,a){var c=d.byId(b),e=arguments.length;if(2==e&&"opacity"==a)return i(c);var a=m[a]||a,g=h.getComputedStyle(c);return 1==e?g:f(c,a,g[a]||c.style[a])};h.set=function(b,a,c){var e=d.byId(b),g=arguments.length,f="opacity"==a,a=m[a]||a;if(3==g)return f?k(e,c):e.style[a]=c;for(var i in a)h.set(b,i,a[i]);return h.getComputedStyle(e)};return h})},"dojo/dom-geometry":function(){define("dojo/dom-geometry",["./sniff","./_base/window","./dom","./dom-style"],function(a,d,f,e){function h(b,a,c,
e,d,f){f=f||"px";b=b.style;if(!isNaN(a))b.left=a+f;if(!isNaN(c))b.top=c+f;if(0<=e)b.width=e+f;if(0<=d)b.height=d+f}function j(b){return"button"==b.tagName.toLowerCase()||"input"==b.tagName.toLowerCase()&&"button"==(b.getAttribute("type")||"").toLowerCase()}function c(b){return"border-box"==i.boxModel||"table"==b.tagName.toLowerCase()||j(b)}var i={boxModel:"content-box"};if(a("ie"))i.boxModel="BackCompat"==document.compatMode?"border-box":"content-box";i.getPadExtents=function(b,a){var b=f.byId(b),
c=a||e.getComputedStyle(b),d=e.toPixelValue,i=d(b,c.paddingLeft),h=d(b,c.paddingTop),j=d(b,c.paddingRight),c=d(b,c.paddingBottom);return{l:i,t:h,r:j,b:c,w:i+j,h:h+c}};i.getBorderExtents=function(b,a){var b=f.byId(b),c=e.toPixelValue,d=a||e.getComputedStyle(b),i="none"!=d.borderLeftStyle?c(b,d.borderLeftWidth):0,h="none"!=d.borderTopStyle?c(b,d.borderTopWidth):0,j="none"!=d.borderRightStyle?c(b,d.borderRightWidth):0,c="none"!=d.borderBottomStyle?c(b,d.borderBottomWidth):0;return{l:i,t:h,r:j,b:c,w:i+
j,h:h+c}};i.getPadBorderExtents=function(b,a){var b=f.byId(b),c=a||e.getComputedStyle(b),d=i.getPadExtents(b,c),c=i.getBorderExtents(b,c);return{l:d.l+c.l,t:d.t+c.t,r:d.r+c.r,b:d.b+c.b,w:d.w+c.w,h:d.h+c.h}};i.getMarginExtents=function(b,a){var b=f.byId(b),c=a||e.getComputedStyle(b),d=e.toPixelValue,i=d(b,c.marginLeft),h=d(b,c.marginTop),j=d(b,c.marginRight),c=d(b,c.marginBottom);return{l:i,t:h,r:j,b:c,w:i+j,h:h+c}};i.getMarginBox=function(b,c){var b=f.byId(b),d=c||e.getComputedStyle(b),h=i.getMarginExtents(b,
d),j=b.offsetLeft-h.l,k=b.offsetTop-h.t,o=b.parentNode,n=e.toPixelValue;if(a("mozilla")){var A=parseFloat(d.left),d=parseFloat(d.top);!isNaN(A)&&!isNaN(d)?(j=A,k=d):o&&o.style&&(o=e.getComputedStyle(o),"visible"!=o.overflow&&(j+="none"!=o.borderLeftStyle?n(b,o.borderLeftWidth):0,k+="none"!=o.borderTopStyle?n(b,o.borderTopWidth):0))}else if((a("opera")||8==a("ie")&&!a("quirks"))&&o)o=e.getComputedStyle(o),j-="none"!=o.borderLeftStyle?n(b,o.borderLeftWidth):0,k-="none"!=o.borderTopStyle?n(b,o.borderTopWidth):
0;return{l:j,t:k,w:b.offsetWidth+h.w,h:b.offsetHeight+h.h}};i.getContentBox=function(b,c){var b=f.byId(b),d=c||e.getComputedStyle(b),h=b.clientWidth,j=i.getPadExtents(b,d),k=i.getBorderExtents(b,d);h?(d=b.clientHeight,k.w=k.h=0):(h=b.offsetWidth,d=b.offsetHeight);a("opera")&&(j.l+=k.l,j.t+=k.t);return{l:j.l,t:j.t,w:h-j.w-k.w,h:d-j.h-k.h}};i.setContentSize=function(b,a,e){var b=f.byId(b),d=a.w,a=a.h;c(b)&&(e=i.getPadBorderExtents(b,e),0<=d&&(d+=e.w),0<=a&&(a+=e.h));h(b,NaN,NaN,d,a)};var k={l:0,t:0,
w:0,h:0};i.setMarginBox=function(b,d,g){var b=f.byId(b),m=g||e.getComputedStyle(b),g=d.w,u=d.h,p=c(b)?k:i.getPadBorderExtents(b,m),m=i.getMarginExtents(b,m);if(a("webkit")&&j(b)){var o=b.style;if(0<=g&&!o.width)o.width="4px";if(0<=u&&!o.height)o.height="4px"}0<=g&&(g=Math.max(g-p.w-m.w,0));0<=u&&(u=Math.max(u-p.h-m.h,0));h(b,d.l,d.t,g,u)};i.isBodyLtr=function(b){b=b||d.doc;return"ltr"==(d.body(b).dir||b.documentElement.dir||"ltr").toLowerCase()};i.docScroll=function(b){var b=b||d.doc,c=d.doc.parentWindow||
d.doc.defaultView;return"pageXOffset"in c?{x:c.pageXOffset,y:c.pageYOffset}:(c=a("quirks")?d.body(b):b.documentElement)&&{x:i.fixIeBiDiScrollLeft(c.scrollLeft||0,b),y:c.scrollTop||0}};if(a("ie"))i.getIeDocumentElementOffset=function(b){b=b||d.doc;b=b.documentElement;if(8>a("ie")){var c=b.getBoundingClientRect(),e=c.left,c=c.top;7>a("ie")&&(e+=b.clientLeft,c+=b.clientTop);return{x:0>e?0:e,y:0>c?0:c}}return{x:0,y:0}};i.fixIeBiDiScrollLeft=function(b,c){var c=c||d.doc,e=a("ie");if(e&&!i.isBodyLtr(c)){var f=
a("quirks"),h=f?d.body(c):c.documentElement,j=d.global;6==e&&!f&&j.frameElement&&h.scrollHeight>h.clientHeight&&(b+=h.clientLeft);return 8>e||f?b+h.clientWidth-h.scrollWidth:-b}return b};i.position=function(b,c){var b=f.byId(b),e=d.body(b.ownerDocument),h=b.getBoundingClientRect(),h={x:h.left,y:h.top,w:h.right-h.left,h:h.bottom-h.top};if(9>a("ie")){var j=i.getIeDocumentElementOffset(b.ownerDocument);h.x-=j.x+(a("quirks")?e.clientLeft+e.offsetLeft:0);h.y-=j.y+(a("quirks")?e.clientTop+e.offsetTop:0)}c&&
(e=i.docScroll(b.ownerDocument),h.x+=e.x,h.y+=e.y);return h};i.getMarginSize=function(b,a){var b=f.byId(b),c=i.getMarginExtents(b,a||e.getComputedStyle(b)),d=b.getBoundingClientRect();return{w:d.right-d.left+c.w,h:d.bottom-d.top+c.h}};i.normalizeEvent=function(b){if(!("layerX"in b))b.layerX=b.offsetX,b.layerY=b.offsetY};return i})},"dojo/domReady":function(){define(["./has"],function(){function a(b){j?b(f):c.push(b)}var d=this,f=document,e={loaded:1,complete:1},h="string"!=typeof f.readyState,j=!!e[f.readyState];
if(h)f.readyState="loading";if(!j){var c=[],i=[],k=function(b){b=b||d.event;if(!(j||"readystatechange"==b.type&&!e[f.readyState])){j=1;if(h)f.readyState="complete";for(;c.length;)c.shift()(f)}},b=function(b,a){b.addEventListener(a,k,!1);c.push(function(){b.removeEventListener(a,k,!1)})};b(f,"DOMContentLoaded");b(d,"load");"onreadystatechange"in f?b(f,"readystatechange"):h||i.push(function(){return e[f.readyState]});if(i.length){var l=function(){if(!j){for(var b=i.length;b--;)if(i[b]()){k("poller");
return}setTimeout(l,30)}};l()}}a.load=function(b,c,e){a(e)};return a})},"frozen/ResourceManager":function(){define("frozen/ResourceManager",["./plugins/sound!","dcl","dcl/bases/Mixer","dojo/_base/lang","dojo/on"],function(a,d,f,e,h){function j(a,e){var d=e;a&&(d=[a,e].join("/"));return d.replace(/\/{2,}/g,"/")}return d(f,{allLoaded:!1,imageDir:null,soundDir:null,resourceList:{},loadImage:function(a){var d=!1;if(!Array.isArray(a))if("string"===typeof a)d=!0,a=[a];else if("object"!==typeof a)return;
for(var f in a)if(a.hasOwnProperty(f)){var b=j(this.imageDir,a[f]);if(this.resourceList[b])a[f]=this.resourceList[b].img;else{this.allLoaded=!1;var l=new Image,g={name:b,img:l,complete:!1},m=e.partial(function(b){b.complete=!0},g);h(l,"load",m);l.src=b;this.resourceList[b]=g;a[f]=l}}return d?a[0]:a},loadSound:function(c){var e=!1;if(!Array.isArray(c))if("string"===typeof c)e=!0,c=[c];else if("object"!==typeof c)return;for(var d in c)if(c.hasOwnProperty(d)){var b=j(this.soundDir,c[d]);if(this.resourceList[b])c[d]=
this.resourceList[b];else{this.allLoaded=!1;var f=new a(b);this.resourceList[b]=f;c[d]=f}}return e?c[0]:c},resourcesReady:function(){if(!this.allLoaded){for(var a in this.resourceList)if(!this.resourceList[a].complete)return!1;this.allLoaded=!0}return!0},getPercentComplete:function(){var a=0,e=0,d;for(d in this.resourceList){var b=this.resourceList[d];e++;b.complete&&(a+=1)}return 0===e?0:Math.round(100*(a/e))}})})},"frozen/plugins/sound":function(){define(["../sounds/Sound","../sounds/WebAudio",
"../sounds/HTML5Audio","dojo/has"],function(a,d,f,e){return{load:function(h,j,c){return e("WebAudio")?c(d):e("HTML5Audio")?c(f):c(a)}}})},"frozen/sounds/Sound":function(){define("frozen/sounds/Sound",["dcl"],function(a){return a(null,{declaredClass:"frozen/sounds/Sound",name:null,complete:!1,formats:{"audio/mpeg":".mp3","audio/webm":".webm","audio/ogg":".ogg","audio/wav":".wav","audio/aac":".aac","audio/x-m4a":".m4a"},probably:null,maybe:null,constructor:function(a){if(!this.probably)this.probably=
[];if(!this.maybe)this.maybe=[];"string"===typeof a&&this.load(a)},load:function(a){this.name=a;this.complete=!0},loop:function(){},play:function(){},_initAudio:function(){},_chooseFormat:function(){if(!this.probably.length&&!this.maybe.length){var a=new Audio,f,e;for(f in this.formats)e=a.canPlayType(f),"probably"===e?this.probably.push(this.formats[f]):"maybe"===e&&this.maybe.push(this.formats[f])}return this.probably.length?this.probably[0]:this.maybe.length?this.maybe[0]:""},_nextFormat:function(){if(1<
this.probably.length)return this.probably.shift(),this.probably[0];if(1===this.probably.length&&(this.probably.length=0,this.maybe.length))return this.maybe[0];if(1<this.maybe.length)return this.maybe.shift(),this.maybe[0];if(1===this.maybe.length)this.maybe.length=0;return""}})})},"frozen/sounds/WebAudio":function(){define("frozen/sounds/WebAudio","./Sound,../utils/removeExtension,dcl,dojo/on,dojo/has,../shims/AudioContext".split(","),function(a,d,f,e,h){h.add("WebAudio",function(a){return!!a.AudioContext});
var j=null;h("WebAudio")&&(j=new window.AudioContext);return f(a,{declaredClass:"frozen/sounds/WebAudio",audioContext:j,buffer:null,load:function(a){var f=this;this.name=a;var h=d(a);h===a&&(a=h+this._chooseFormat());h=new XMLHttpRequest;h.open("GET",a,!0);h.responseType="arraybuffer";e.once(h,"load",function(b){f.audioContext.decodeAudioData(b.target.response,function(b){f.buffer=b;f.complete=!0},function(){f._nextFormat()?f.load(f.name):f.complete=!0})});h.send()},loop:function(a){this.buffer&&
this._initAudio(a,!0).noteOn(0)},play:function(a,e){this.buffer&&this._initAudio(a,!1).noteOn(e||0)},_initAudio:function(a,e){var e="boolean"===typeof e?e:!1,d=this.audioContext.createBufferSource();d.buffer=this.buffer;d.loop=e;if(a){var b=this.audioContext.createGainNode();b.gain.value=a;d.connect(b);b.connect(this.audioContext.destination)}else d.connect(this.audioContext.destination);return d}})})},"frozen/utils/removeExtension":function(){define("frozen/utils/removeExtension",function(){return function(a){var d=
a.lastIndexOf(".");return 0>d?a:a.slice(0,d)}})},"frozen/shims/AudioContext":function(){define("frozen/shims/AudioContext",function(){for(var a=["ms","moz","webkit","o"],d=0;d<a.length&&!window.AudioContext;++d)window.AudioContext=window[a[d]+"AudioContext"]})},"frozen/sounds/HTML5Audio":function(){define("frozen/sounds/HTML5Audio",["./Sound","../utils/removeExtension","dcl","dojo/on","dojo/has"],function(a,d,f,e,h){h.add("HTML5Audio",function(a){return!!a.Audio});h.add("shittySound",function(){return!(!h("android")&&
!h("ios")||!h("webkit"))});return f(a,{declaredClass:"frozen/sounds/HTML5Audio",audio:null,load:function(a){this.audio=new Audio;var c=this;this.name=a;var f=d(a);f===a&&(a=f+this._chooseFormat());if(h("shittySound"))e.once(document,"touchstart",function(){c.audio.load()}),this._updateCurrentTime=null,e.once(this.audio,"progress",function(){null!==c._updateCurrentTime&&c._updateCurrentTime()});this.audio.pause();this.audio.preload="auto";e.once(this.audio,"error",function(){c._nextFormat()?c.load(c.name):
(c.audio.src=null,c.complete=!0)});e.once(this.audio,"loadeddata",function(){c.complete=!0});this.audio.src=a},loop:function(a){var c=this._initAudio(a,!0);e.once(c,"loadeddata",function(){c.play()})},play:function(a,c){c=c||0;if(h("shittySound"))try{return this.audio.currentTime=c/1E3,this.audio.play()}catch(d){return this._updateCurrentTime=function(){this._updateCurrentTime=null;this.audio.currentTime=c/1E3;return this.audio.play()},this.audio.play()}var f=this._initAudio(a,!1);e.once(f,"loadeddata",
function(){f.currentTime=c/1E3;f.play()})},_initAudio:function(a,c){var c="boolean"===typeof c?c:!1,e=new Audio;e.pause();e.volume=a||1;e.loop=c;e.preload="auto";e.mozLoadFrom?e.mozLoadFrom(this.audio):e.src=this.audio.currentSrc;return e}})})},"frozen/shims/RAF":function(){define("frozen/shims/RAF",function(){for(var a=0,d=["ms","moz","webkit","o"],f=0;f<d.length&&!window.requestAnimationFrame;++f)window.requestAnimationFrame=window[d[f]+"RequestAnimationFrame"],window.cancelAnimationFrame=window[d[f]+
"CancelAnimationFrame"]||window[d[f]+"CancelRequestAnimationFrame"];if(!window.requestAnimationFrame)window.requestAnimationFrame=function(e){var d=(new Date).getTime(),f=Math.max(0,16-(d-a)),c=window.setTimeout(function(){e(d+f)},f);a=d+f;return c};if(!window.cancelAnimationFrame)window.cancelAnimationFrame=function(a){clearTimeout(a)}})},"frozen/box2d/entities/Circle":function(){define("frozen/box2d/entities/Circle",["dcl","./Entity","../../utils/distance"],function(a,d,f){return a(d,{declaredClass:"frozen/box2d/entities/Circle",
radius:1,draw:a.superCall(function(a){return function(d,f){var f=f||this.scale||1,c=d.lineWidth;d.lineWidth=this.lineWidth;d.fillStyle=this.fillStyle;d.strokeStyle=this.strokeStyle;d.beginPath();d.arc(this.x*f,this.y*f,this.radius*f,0,2*Math.PI,!0);d.closePath();d.fill();d.stroke();this.staticBody||(d.save(),d.translate(this.x*f,this.y*f),d.rotate(this.angle),d.translate(-this.x*f,-this.y*f),d.beginPath(),d.moveTo(this.x*f,this.y*f),d.lineTo(this.x*f,this.y*f-this.radius*f),d.closePath(),d.stroke(),
d.restore());d.lineWidth=c;a.apply(this,[d,f])}}),scaleShape:a.superCall(function(a){return function(d){this.radius*=d;a.apply(this,[d])}}),pointInShape:function(a){return f(a,this)<=this.radius}})})},"frozen/box2d/entities/Entity":function(){define("frozen/box2d/entities/Entity",["dcl","dcl/bases/Mixer","dojo/_base/lang"],function(a,d,f){return a(d,{declaredClass:"frozen/box2d/entities/Entity",id:0,x:0,y:0,scale:null,angle:0,center:null,restitution:0.3,density:1,friction:0.9,linearDamping:0,linearVelocity:null,
angularVelocity:0,angularDamping:0,staticBody:!1,fillStyle:"rgba(128,128,128,0.5)",strokeStyle:"#000",lineWidth:1,maskBits:null,categoryBits:null,groupIndex:null,update:function(a){f.mixin(this,a)},draw:function(a,d){var d=d||this.scale||1,f=a.lineWidth;a.lineWidth=this.lineWidth;a.fillStyle=this.strokeStyle;a.beginPath();a.arc(this.x*d,this.y*d,4,0,2*Math.PI,!0);a.closePath();a.fill();if(this.center)a.fillStyle="yellow",a.beginPath(),a.arc(this.center.x*d,this.center.y*d,2,0,2*Math.PI,!0),a.closePath(),
a.fill();a.lineWidth=f},scaleShape:function(a){this.x*=a;this.y*=a;this.alreadyScaled=!0}})})},"frozen/utils/distance":function(){define("frozen/utils/distance",function(){return function(a,d){return Math.sqrt((d.x-a.x)*(d.x-a.x)+(d.y-a.y)*(d.y-a.y))}})},"frozen/box2d/entities/Polygon":function(){define("frozen/box2d/entities/Polygon",["dcl","./Entity","../../utils/scalePoints","../../utils/pointInPolygon","../../utils/translatePoints"],function(a,d,f,e,h){return a(d,{declaredClass:"frozen/box2d/entities/Polygon",
points:[],draw:a.superCall(function(a){return function(c,e){var e=e||this.scale||1,d=c.lineWidth;c.lineWidth=this.lineWidth;c.save();c.translate(this.x*e,this.y*e);c.rotate(this.angle);c.translate(-this.x*e,-this.y*e);c.fillStyle=this.fillStyle;c.strokeStyle=this.strokeStyle;c.beginPath();c.moveTo((this.x+this.points[0].x)*e,(this.y+this.points[0].y)*e);for(var b=1;b<this.points.length;b++)c.lineTo((this.points[b].x+this.x)*e,(this.points[b].y+this.y)*e);c.lineTo((this.x+this.points[0].x)*e,(this.y+
this.points[0].y)*e);c.closePath();c.fill();c.stroke();c.restore();c.lineWidth=d;a.apply(this,[c,e])}}),scaleShape:a.superCall(function(a){return function(c){this.points=f(this.points,c);a.apply(this,[c])}}),pointInShape:function(a){return e(a,h(this.points,this))}})})},"frozen/utils/scalePoints":function(){define("frozen/utils/scalePoints",function(){function a(d,f){if(Array.isArray(d)){var e=[];d.forEach(function(d){e.push(a(d,f))});d=e}else d="object"===typeof f?{x:d.x*f.x,y:d.y*f.y}:{x:d.x*f,
y:d.y*f};return d}return a})},"frozen/utils/pointInPolygon":function(){define("frozen/utils/pointInPolygon",function(){return function(a,d){if(!a||!d)return!1;for(var f=d.points||d,e=!1,h=f.length-1,j=0;j<f.length;h=j++){var c=f[j].x,i=f[j].y,k=f[h].x,h=f[h].y;i>a.y!==h>a.y&&a.x<(k-c)*(a.y-i)/(h-i)+c&&(e=!e)}return e}})},"frozen/utils/translatePoints":function(){define("frozen/utils/translatePoints",function(){function a(d,f){if(Array.isArray(d)){var e=[];d.forEach(function(d){e.push(a(d,f))});d=
e}else d={x:d.x,y:d.y},null!=f.x&&(d.x+=f.x),null!=f.y&&(d.y+=f.y);return d}return a})},"frozen/box2d/entities/MultiPolygon":function(){define("frozen/box2d/entities/MultiPolygon",["dcl","./Entity","../../utils/scalePoints","../../utils/pointInPolygon","../../utils/translatePoints"],function(a,d,f,e,h){return a(d,{declaredClass:"frozen/box2d/entities/MultiPolygon",polys:[],draw:a.superCall(function(a){return function(c,e){var e=e||this.scale||1,d=c.lineWidth;c.lineWidth=this.lineWidth;c.save();c.translate(this.x*
e,this.y*e);c.rotate(this.angle);c.translate(-this.x*e,-this.y*e);c.fillStyle=this.fillStyle;c.strokeStyle=this.strokeStyle;for(var b=0;b<this.polys.length;b++){c.beginPath();c.moveTo((this.x+this.polys[b][0].x)*e,(this.y+this.polys[b][0].y)*e);for(var f=1;f<this.polys[b].length;f++)c.lineTo((this.polys[b][f].x+this.x)*e,(this.polys[b][f].y+this.y)*e);c.lineTo((this.x+this.polys[b][0].x)*e,(this.y+this.polys[b][0].y)*e);c.closePath();c.fill();c.stroke()}c.restore();c.lineWidth=d;a.apply(this,[c,e])}}),
scaleShape:a.superCall(function(a){return function(c){this.polys=f(this.polys,c);a.apply(this,[c])}}),pointInShape:function(a){for(var c=0;c<this.polys.length;c++)if(e(a,h(this.polys[c],this)))return!0;return!1}})})},"frozen/box2d/entities/Rectangle":function(){define("frozen/box2d/entities/Rectangle",["dcl","./Entity"],function(a,d){return a(d,{declaredClass:"frozen/box2d/entities/Rectangle",halfWidth:1,halfHeight:1,draw:a.superCall(function(a){return function(e,d){var d=d||this.scale||1,j=e.lineWidth;
e.lineWidth=this.lineWidth;e.save();e.translate(this.x*d,this.y*d);e.rotate(this.angle);e.translate(-this.x*d,-this.y*d);e.fillStyle=this.fillStyle;e.strokeStyle=this.strokeStyle;e.fillRect((this.x-this.halfWidth)*d,(this.y-this.halfHeight)*d,2*this.halfWidth*d,2*this.halfHeight*d);e.strokeRect((this.x-this.halfWidth)*d,(this.y-this.halfHeight)*d,2*this.halfWidth*d,2*this.halfHeight*d);e.restore();e.lineWidth=j;a.apply(this,[e,d])}}),scaleShape:a.superCall(function(a){return function(e){this.halfHeight*=
e;this.halfWidth*=e;a.apply(this,[e])}}),pointInShape:function(a){return a.x>=this.x-this.halfWidth&&a.x<=this.x+this.halfWidth&&a.y>=this.y-this.halfHeight&&a.y<=this.y+this.halfHeight}})})},"frozen/box2d/joints/Joint":function(){define("frozen/box2d/joints/Joint",["dcl","dcl/bases/Mixer"],function(a,d){return a(d,{declaredClass:"frozen/box2d/joints/Joint",bodyId1:null,bodyId2:null,bodyPoint1:null,jointAttributes:null,scaleJointLocation:function(a){if(a&&this.bodyPoint1)this.bodyPoint1.x*=a,this.bodyPoint1.y*=
a,this.alreadyScaled=!0}})})},"frozen/box2d/joints/Revolute":function(){define("frozen/box2d/joints/Revolute",["dcl","dojo/_base/lang","./Joint"],function(a,d,f){var e=Box2D.Common.Math.b2Vec2,h=Box2D.Dynamics.Joints.b2RevoluteJointDef;return a(f,{declaredClass:"frozen/box2d/joints/Revolute",createB2Joint:function(a){if(a&&a.bodiesMap&&a.b2World&&a.jointsMap&&!a.jointsMap[this.id]){var c=a.bodiesMap[this.bodyId1],f=a.bodiesMap[this.bodyId2];if(c&&f){var k;this.bodyPoint1&&(k=new e(this.bodyPoint1.x,
this.bodyPoint1.y));k=k||c.GetWorldCenter();var b=new h;b.Initialize(c,f,k,void 0);this.jointAttributes&&d.mixin(b,this.jointAttributes);return a.b2World.CreateJoint(b)}}}})})},"frozen/box2d/joints/Distance":function(){define("frozen/box2d/joints/Distance",["dcl","dojo/_base/lang","./Joint"],function(a,d,f){var e=Box2D.Common.Math.b2Vec2,h=Box2D.Dynamics.Joints.b2DistanceJointDef;return a(f,{declaredClass:"frozen/box2d/joints/Distance",bodyPoint2:null,scaleJointLocation:a.superCall(function(a){return function(c){if(c&&
this.bodyPoint2)this.bodyPoint2.x*=c,this.bodyPoint2.y*=c,this.alreadyScaled=!0;a.apply(this,[c])}}),createB2Joint:function(a){if(a&&a.bodiesMap&&a.b2World&&a.jointsMap&&!a.jointsMap[this.id]){var c=a.bodiesMap[this.bodyId1],f=a.bodiesMap[this.bodyId2];if(c&&f){var k,b;this.bodyPoint1&&(k=new e(this.bodyPoint1.x,this.bodyPoint1.y));this.bodyPoint2&&(b=new e(this.bodyPoint2.x,this.bodyPoint2.y));k=k||c.GetWorldCenter();b=b||f.GetWorldCenter();var l=new h;l.Initialize(c,f,k,b);this.jointAttributes&&
d.mixin(l,this.jointAttributes);return a.b2World.CreateJoint(l)}}}})})},"frozen/box2d/joints/Prismatic":function(){define("frozen/box2d/joints/Prismatic",["dcl","dojo/_base/lang","./Joint"],function(a,d,f){var e=Box2D.Common.Math.b2Vec2,h=Box2D.Dynamics.Joints.b2PrismaticJointDef;return a(f,{declaredClass:"frozen/box2d/joints/Prismatic",axisScale:null,createB2Joint:function(a){if(a&&a.bodiesMap&&a.b2World&&a.jointsMap&&!a.jointsMap[this.id]){var c=a.bodiesMap[this.bodyId1],f=a.bodiesMap[this.bodyId2];
if(c&&f){var k;this.bodyPoint1&&(k=new e(this.bodyPoint1.x,this.bodyPoint1.y));k=k||c.GetWorldCenter();var b=new h,l;l=this.axisScale?new e(this.axisScale.x,this.axisScale.y):new e(1,0);b.Initialize(c,f,k,l);this.jointAttributes&&d.mixin(b,this.jointAttributes);return a.b2World.CreateJoint(b)}}}})})},"frozen/reiner/Creature":function(){define("frozen/reiner/Creature",["dcl","dcl/bases/Mixer","dojo/_base/lang","../Sprite","../Animation"],function(a,d,f,e,h){return a([d,e],{statics:{EAST:0,NORTH:1,
NORTHEAST:2,NORTHWEST:3,SOUTH:4,SOUTHEAST:5,SOUTHWEST:6,WEST:7,STATE_WALKING:0,STATE_DYING:1,STATE_IDLE:2},state:0,walkingAnims:[],dyingAnims:[],idleAnims:[],direction:0,constructor:function(){this.state=this.statics.STATE_IDLE;this.direction=this.statics.EAST},update:function(a){this.x+=this.dx*a;this.y+=this.dy*a;if(this.state!==this.statics.STATE_DYING){if(0<this.dx&&0===this.dy)this.direction=this.statics.EAST;else if(0===this.dx&&0>this.dy)this.direction=this.statics.NORTH;else if(0<this.dx&&
0>this.dy)this.direction=this.statics.NORTHEAST;else if(0>this.dx&&0>this.dy)this.direction=this.statics.NORTHWEST;else if(0===this.dx&&0<this.dy)this.direction=this.statics.SOUTH;else if(0<this.dx&&0<this.dy)this.direction=this.statics.SOUTHEAST;else if(0>this.dx&&0<this.dy)this.direction=this.statics.SOUTHWEST;else if(0>this.dx&&0===this.dy)this.direction=this.statics.WEST;this.state=0===this.dx&&0===this.dy?this.statics.STATE_IDLE:this.statics.STATE_WALKING}this.anim=this.state===this.statics.STATE_WALKING?
this.walkingAnims[this.direction]:this.state===this.statics.STATE_DYING?this.dyingAnims[this.direction]:this.idleAnims[this.direction];this.anim.update(a)},createAnimations:function(a,c,e,d,b,l){var g=[],m=f.isArray(c),u=1;l||(l=0);for(var p=0;8>p;p++){g[p]=new h({height:d,width:b,image:e});for(var o=0;o<a;o++)u=m?c[o]:c,g[p].addFrame(u,o+a*p,l)}return g}})})},"frozen/Sprite":function(){define("frozen/Sprite",["dcl","dcl/bases/Mixer"],function(a,d){var f=a(d,{x:0,y:0,dx:0,dy:0,maxSpeed:0,name:null,
collisionRadius:40,update:function(a){this.x+=this.dx*a;this.y+=this.dy*a;this.anim.update(a)},limitSpeed:function(a){return this.maxSpeed?Math.abs(a)>this.maxSpeed?0<a?this.maxSpeed:0>a?this.maxSpeed:0:a:a},getCurrentFrame:function(){if(this.anim)return this.anim.getCurrentFrame()},draw:function(a){this.anim&&this.anim.draw(a,this.x,this.y)},clone:function(){return new f({anim:this.anim.clone()})}});return f})},"frozen/Animation":function(){define("frozen/Animation",["./AnimFrame","dcl","dcl/bases/Mixer"],
function(a,d,f){var e=d(f,{currFrameIndex:0,animTime:0,totalDuration:0,height:64,width:64,image:null,offsetX:0,offsetY:0,constructor:function(){this.start()},createFromSheet:function(a,d,c,f,k,b){c=new e({image:c,height:k,width:f});f=Array.isArray(d);k=1;b||(b=0);for(var l=0;l<a;l++)k=f?d[l]:d,c.addFrame(k,l,b);return c},clone:function(){return new e({image:this.image,frames:this.frames,totalDuration:this.totalDuration})},addFrame:function(d,e,c){if(!this.frames)this.frames=[];this.totalDuration+=
d;this.frames.push(new a({endTime:this.totalDuration,image:this.image,imgSlotX:e,imgSlotY:c}))},start:function(){this.currFrameIndex=this.animTime=0},update:function(a){if(1<this.frames.length){this.animTime+=a;if(this.animTime>=this.totalDuration)this.animTime%=this.totalDuration,this.currFrameIndex=0;for(;this.animTime>this.frames[this.currFrameIndex].endTime;)this.currFrameIndex++}},getCurrentFrame:function(){return 0===this.frames.length?null:this.frames[this.currFrameIndex]},draw:function(a,
d,c){var e=this.getCurrentFrame();a.drawImage(this.image,e.imgSlotX*this.width+this.offsetX,e.imgSlotY*this.height+this.offsetY,this.width,this.height,d,c,this.width,this.height)}});return e})},"frozen/AnimFrame":function(){define("frozen/AnimFrame",["dcl","dcl/bases/Mixer"],function(a,d){return a(d,{endTime:0,imgSlotX:0,imgSlotY:0,image:null})})},"frozen/utils":function(){define("frozen/utils","./utils/averagePoints,./utils/degreesToRadians,./utils/radiansToDegrees,./utils/pointInPolygon,./utils/distance,./utils/degreesFromCenter,./utils/radiansFromCenter,./utils/scalePoints,./utils/translatePoints,./utils/insideCanvas".split(","),
function(a,d,f,e,h,j,c,i,k,b){return{averagePoints:a,degreesToRadians:d,radiansToDegrees:f,pointInPolygon:e,distance:h,degreesFromCenter:j,radiansFromCenter:c,scalePoints:i,translatePoints:k,insideCanvas:b}})},"frozen/utils/averagePoints":function(){define("frozen/utils/averagePoints",function(){return function(a){var d={x:0,y:0};a.forEach(function(a){d.x+=a.x;d.y+=a.y});d.x/=a.length;d.y/=a.length;return d}})},"frozen/utils/degreesToRadians":function(){define("frozen/utils/degreesToRadians",function(){var a=
Math.PI/180;return function(d){return d*a}})},"frozen/utils/radiansToDegrees":function(){define("frozen/utils/radiansToDegrees",function(){var a=180/Math.PI;return function(d){return d*a}})},"frozen/utils/degreesFromCenter":function(){define("frozen/utils/degreesFromCenter",["./radiansToDegrees","./radiansFromCenter"],function(a,d){return function(f,e){return a(d(f,e))}})},"frozen/utils/radiansFromCenter":function(){define("frozen/utils/radiansFromCenter",function(){var a={x:0,y:0};return function(d,
f){d=d||a;return d.x===f.x&&d.y===f.y?0:d.x===f.x?d.y>f.y?0:Math.PI:d.y===f.y?d.x>f.x?1.5*Math.PI:Math.PI/2:d.x<f.x&&d.y>f.y?Math.atan((f.x-d.x)/(d.y-f.y)):d.x<f.x&&d.y<f.y?Math.PI/2+Math.atan((f.y-d.y)/(f.x-d.x)):d.x>f.x&&d.y<f.y?Math.PI+Math.atan((d.x-f.x)/(f.y-d.y)):1.5*Math.PI+Math.atan((d.y-f.y)/(d.x-f.x))}})},"frozen/plugins/loadImage":function(){define(["../ResourceManager","../utils/parseString"],function(a,d){var f=new a;return{load:function(a,h,j){a=d(a);"string"!==typeof a?Object.keys(a).forEach(function(c){a[c]=
h.toUrl(a[c])}):a=h.toUrl(a);var c=f.loadImage(a);j(c)}}})},"frozen/utils/parseString":function(){define("frozen/utils/parseString",function(){return function(a){0===a.indexOf("{")&&a.lastIndexOf("}")===a.length-1?a=JSON.parse(a.replace(/,/g,'","').replace(/:(?!\/\/)/g,'":"').replace(/\{/,'{"').replace(/\}/,'"}')):0===a.indexOf("[")&&a.lastIndexOf("]")===a.length-1&&(a=JSON.parse(a.replace(/,/g,'","').replace(/\[/g,'["').replace(/\]/g,'"]')));return a}})},"frozen/plugins/loadSound":function(){define(["../ResourceManager",
"../utils/parseString"],function(a,d){var f=new a;return{load:function(a,h,j){a=d(a);"string"!==typeof a?Object.keys(a).forEach(function(c){a[c]=h.toUrl(a[c])}):a=h.toUrl(a);var c=f.loadSound(a);j(c)}}})},"dojo/keys":function(){define("dojo/keys",["./_base/kernel","./sniff"],function(a,d){return a.keys={BACKSPACE:8,TAB:9,CLEAR:12,ENTER:13,SHIFT:16,CTRL:17,ALT:18,META:d("webkit")?91:224,PAUSE:19,CAPS_LOCK:20,ESCAPE:27,SPACE:32,PAGE_UP:33,PAGE_DOWN:34,END:35,HOME:36,LEFT_ARROW:37,UP_ARROW:38,RIGHT_ARROW:39,
DOWN_ARROW:40,INSERT:45,DELETE:46,HELP:47,LEFT_WINDOW:91,RIGHT_WINDOW:92,SELECT:93,NUMPAD_0:96,NUMPAD_1:97,NUMPAD_2:98,NUMPAD_3:99,NUMPAD_4:100,NUMPAD_5:101,NUMPAD_6:102,NUMPAD_7:103,NUMPAD_8:104,NUMPAD_9:105,NUMPAD_MULTIPLY:106,NUMPAD_PLUS:107,NUMPAD_ENTER:108,NUMPAD_MINUS:109,NUMPAD_PERIOD:110,NUMPAD_DIVIDE:111,F1:112,F2:113,F3:114,F4:115,F5:116,F6:117,F7:118,F8:119,F9:120,F10:121,F11:122,F12:123,F13:124,F14:125,F15:126,NUM_LOCK:144,SCROLL_LOCK:145,UP_DPAD:175,DOWN_DPAD:176,LEFT_DPAD:177,RIGHT_DPAD:178,
copyKey:d("mac")&&!d("air")?d("safari")?91:224:17}})}}});(function(){require({cache:{}});require.boot&&require.apply(null,require.boot)})();